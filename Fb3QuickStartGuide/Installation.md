# Firebirdのインストール

このセクションでは、FirebirdをWindowsまたはLinuxへインストールする方法を説明します。多くの主要なケースに対応しますが、問題に直面したり、このドキュメントにないニーズがある場合は、リリースノートを読むのが確実です。旧バージョンからのアップグレードや古い（そしておそらく長いこと残っていた）InterBaseやFirebirdの残滓（DDLやレジストリ、環境変数など）があなたのシステムに残っている場合は特に重要です。

<!-- TOC -->
* [Firebirdサーバのインストール](#firebirdサーバのインストール)
* [インストールのその前に](#インストールのその前に)
* [インストールドライブ](#インストールドライブ)
* [インストールスクリプト・プログラム](#インストールスクリプト・プログラム)
* [サーバーモード](#サーバーモード)
* [Windowsでのインストール](#windowsでのインストール)
* [Guardianは使うべきか](#guardianは使うべきか)
* [Linux及びUnix系プラットフォームへのインストール](#linux及びunix系プラットフォームへのインストール)
* [複数のサーバをインストールする](#複数のサーバをインストールする)
* [インストールを確かめる](#インストールを確かめる)
<!-- TOC -->

## インストーラ

FirebirdのWebサイト[http://firebirdsql.org/](http://firebirdsql.org/)に以下のような名前でインストーラがあります。

* Firebird-3.0.0.bbbb_p_x64.exe（Windowsインストーラ）
* Firebird-3.0.0.bbbb_p_x64.zip（Windows マニュアルインストール向けZipファイル）
* Firebird-3.0.0.bbbb_p_Win32.exe（Windows 32bitインストーラ）
* Firebird-3.0.0.bbbb-p.amd64.rpm（Linux RPMパッケージ）
* Firebird-3.0.0.bbbb-p.amd64.tar.gz（Linux tarball形式）
* Firebird-3.0.0.bbbb-p.i686.rpm（Linux 32bit RPMパッケージ）
* Firebird-3.0.0.bbbb-x86_64.pkg（Mac OS-X 64bitパッケージ）
* などなど

リスト内で _bbbb_ となっている箇所はビルドナンバー（例えば32483は初回3.0.0リリースの番号）で、 _p_ はパッケージナンバー（通常は0または１桁の小さい数字）です。  
Firebird3のパッケージは間違いなく様々なLinuxディストリビューションとそのリポジトリに登場することでしょう。それらは独自に命名体型を持ちます。

## Firebirdサーバのインストール

### インストールのその前に

過去のバージョンのFirebirdは __完全に__ アンインストールする（次の段落を読んだ __後__ に！）とともに、Windowsのシステムディレクトリから ``gds32.dll``と``fbclient.dll``を見つけ出して削除してください。Linuxを使用しているのであれば、アンインストールスクリプトがライブラリや/usr/lib\[64\]へのシンボリックリンクを削除するでしょうが、``libfbclient.*``や``libgds.*``といったものが残っていないか確認しても問題はありません。

更に、Firebird3は旧バージョンで作成されたデータベースを開けないことを認識してください。そのため、既存の設定を削除する前に、旧バージョンで作成されたすべてのデータベースをバックアップしてください。後にFirebird3上にリストアすることができます。

古いセキュリティデータベース``security2.fdb``のバックアップを取ることもできます。

### インストールドライブ

Firebirdサーバ――とあなたが作成・接続するデータベース――はホスト機に対して物理的に接続されたハードドライブに存在しなくてはなりません。Firebirdサーバのコンポネントまたはデータベースをマップドライブ、ファイル共有やネットワークファイルシステム（ええと、できるけれども、すべきではないですし、その技術はここでは触れません）に配置することはできません[^注1]。

[^注1]: 光学ディスク（CD、DVD、Blu-rayなど）に読み取り専用データベースを乗せることはできますが、Firebirdサーバはできません。

### インストールスクリプト・プログラム

Firebirdを、ファイルシステムのコピー（スナップショットや非圧縮の.zipアーカイブを展開するような方法）で導入することは可能ですが、提供しているインストーラ（Windowsには.exe、Linuxにはrpm）を使うことを強くおすすめします。初めてFirebirdをインストールする場合は特にそうです。Windowsのインストーラ、LinuxのRPMパッケージと様々なPOSIXプラットフォーム向けの公式tarballでの``install.sh``スクリプトの全てはいくつかの非常に重要なセットアップタスクを実行します。これから説明するインストール手順を正しく実施すれば、後はログインしてFirebirdを使ってゆくだけです。

### サーバーモード

一部のインストーラは『クラシック』『スーパークラシック』『スーバーサーバー』モードを選ぶよう尋ねてきます。これらは何でしょうか？

* 『クラシック』（あるいは _マルチプロセス_ ）はコネクションごとに追加のプロセス大量に生み出す１つのリスナープロセスを必要とします。ロックメカニズムを使用してデータベースファイルへの接続を共有します。
* 『スーパークラシック』（ _スレッド共有_ ）は１つのサーパプロセスを持ちます。クライアントのコネクションは分離スレッドで扱われ、それぞれは別個のデータベースへのページキャッシュを持ちます。他のプロセス（例：Firebird組み込みサーバ）は同じデータベースを同時に開くことができます（なので、_共有_ なのです）。
* 『スーパーサーバ』（ _スレッド専有_ ）もクライアントのコネクションを扱うスレッドと１つのサーバプロセスを持ちます。データベースへのページキャッシュは１つで共通です。このモードでは、開いているデータベースへのアクセスは排他である必要があります（なので _専有_ ）。

それぞれのモードはどれも安定しており、それぞれの優劣はありません。もちろんあなた自身には特定の考慮すべき点があるかもしれません。判断がつかなければ、とりあえずはインストーラのデフォルトに従いましょう。サーバーモードは後で設定ファイル``firebird.conf``で変更することができます。再起動は必要ですが再インストールは不要です。サーバモードはデータベースごとに設定することが可能です（詳細はリリースノートを参照してください）。

[^注2]: Firebird 2.5またはそれ以前の利用者向け：Firebird3から、スーパーサーバはマルチプロセスに完全対応します。なのでSMP対応のない点は避ける理由ではもはやなくなりました。

### Windowsでのインストール

インストーラを実行するときは管理者権限（例えば、インストーラを右クリック→『管理者権限で実行』）で行います。そうしなければ、後ほど権限周りの問題に直面するかもしれません。

Windows上ではFirebirdは既定ではシステムサービスとして動作しますが、インストールの最中にアプリケーションとして実行するよう選ぶことができます。ただし、十分な理由がない場合には行わないでください。

インストーラは古いFirebirdクライアント（例えば、pre-3.0）の認証を有効にするかどうか尋ねられます。セキュリティが気になる場合は（そうあるべきなのですが）、これを有効にしないか、既存のクライアントをFirebird3.0にアップグレードするまでの間だけ、一時的に有効にします。古い接続方式は暗号化されていない回線を使用してパスワードを送信します。また、パスワードの文字列長を8文字に制限します。

![img](https://firebirdsql.org/file/documentation/reference_manuals/user_manuals/html/images/InstallScreen-3.0.png)

インストールの際、Firebirdの管理ユーザSYSDBAのパスワードを設定するオプションがあります。Firebirdのパスワードは255バイト長までですが、ハッシュアルゴリズムの性質上、『効果的な長さ』は概ね20バイトです。なので、長ければ長いほどよい、ということでもありません。ですが気をつけてほしいのですが、もしそのようなパスワードを入力するとき、毎回毎回接続するのにその長さのパスワードを入力しなければなりません――先頭20文字だけ入力したところで機能しません！

#### Guardianは使うべきか

Firebird Guardianはサーパプロセスの監視やプロセスが異常終了した際の再起動に使うユーティリティです。Windowsでインストールをする際、スーパークラシックまたはスーパーサーバモードで実行するときはGuardianを使うよう設定することができます。しかし、最近のWindowsはサービスを監視して再起動する機能を持っているので、サービスとしてFirebirdを動作する場合はGuardianを使用する理由はありません（そうすべきです）。

Guardianは将来的には廃止する予定です。

### Linux及びUnix系プラットフォームへのインストール

すべてのケースにおいて、これからインストールするバージョンのFIrebirdのリリースノートは読みましょう。POSIX系OSには、特にオープンソースなOSはそうですが、リリースごとに大きな違いがあるかもしれません。可能な限り
FIrebirdのビルドエンジニアは既知の問題をドキュメント化することを試みました。

ダウンロードキットでパッケージングされたものは別として、公式にリリースされたFirebirdの各リリースノートは[http://www.firebirdsql.org/en/release-notes/](http://www.firebirdsql.org/en/release-notes/)で確認することができます。

RPMパッケージをサポートするLinuxディストリビューションであれば、RPMパッケージマネージャを使う方法についての然るべきドキュメントを調べてください。ほとんどのディストリビューションでは、コマンドシェルまたはGUIを使用してインストールする方法があります。

RPMパッケージを処理できないLinuxディストリビューションやRPMパッケージの提供がないUNIX系OS向けに ``.tar.gz``形式のファイルが使用できます。たいてい、インストールはアーカイブを展開して``install.sh``を実行するだけです。いくつかのケースでは、リリースノートは同梱のリードミーにスクリプトのカスタマイズや手作業での作業の指示が記載されています。

### 複数のサーバをインストールする

Firebirdは1つのマシンでふk数雨のサーバの操作をすることができます。同時に、Firebird 1.xやInterBaseと同時に動作することもできます。この設定をするのは初心者の作業ではありませんが。同じマシン上で複数のサーバをどうさせる必要があるのであれば、2つ目や以降のサーバは手作業でインストールと設定をしなければなりません。それぞれ異なるサービス名・異なるTCP/IPポートを使用する必要があります。``doc``サブディレクトリにある``install_windows_manually.txt``がWindows上で構成する助けになるでしょう。ですが、正直に言えば、その内容はFirebird2.1向けです。

あわせて、Firebird1.5（1.5だって！？）のリリースノートの章『Configuring the Port Service on Client and Server』を読んでください。

[Configuring the Port Service on Client and Server（HTML）](http://www.firebirdsql.org/file/documentation/release_notes/html/rlsnotes15.html#config-port)  
[Configuring the Port Serviceon Client and Server（PDF）](http://www.firebirdsql.org/file/documentation/release_notes/Firebird-1.5.6-ReleaseNotes.pdf#page=96)

### インストールを確かめる

インストールしたFirebirdにネットワーク越しにアクセスしたい場合、Firebirdサーバそのものをテストする前に、サーバマシンがクライアントから到達できるかどうかを確かめてください。この時点で、推奨される
TCP/IPネットワーク・プロトコルがFirebirdサーバ・クライアントの接続に使用されていることを確認するかと思います（Windowsネットワークでは、NetBEUIも対応しています）。

#### サーバにpingを打つ

``ping``コマンド――多くのシステムで使用可能――はすばやくかつ簡単にネットワーク越しにサーバへアクセスできるか確かめられる方法です。例えば、クライアントから見たときのそのドメイン内でのサーバIPアドレスが``192.13.14.1``だったとき、コマンドシェルをクライアント機で立ち上げてコマンドを打ち込みます。

``` bash
ping 192.13.14.1
```

サンプルのIPアドレスを、サーバがブロードキャストしているIPアドレスに置き換えます。管理されたネットワーク上にいて、サーバのアドレスがわからない場合、システム管理者に問い合わせてください。もちろん、知っていたらですが、サーバ名を使用してpingを打つこともできます。

``` bash
ping vercingetorix
```

もしローカルのクライアントからサーバに接続する場合、つまり、クライアントがサーバとして動作しているマシンで動作している場合、仮想TCP/IPループバックサーバへpingを打つことができます。

``` bash
ping localhost
# または
ping 127.0.0.1
```

2つのマシンをクロスLANケーブルでつなげた簡単なネットワークである場合、127.0.0.1以外の任意のIPアドレスでサーバを構成できます（127.0.0.1はループバックとして予約されています）。そして、もちろんですが、クライアントが使用するIPアドレスも同様です。ネットワークカードの『ネイティブ』なIPアドレスを知っていて、かつ異なるものであれば、それらを使うこともできます。

クライアントからサーバに接続できることが確認できたら、次のステップに移りましょう。

#### Firebirdサーバが動いているか確かめる

